
<div class="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
   <h2 class="text-xl font-bold">Manage Tyre Stock</h2>
   @if (editingTyreId()) { <button (click)="cancelTyreEdit()" class="text-xs text-red-500 uppercase font-bold hover:underline">Cancel Edit</button> }
</div>
<div class="bg-white/5 p-6 rounded-xl mb-12 border border-white/10" [class.border-[#E30613]]="editingTyreId()">
   <h3 class="text-sm font-bold text-gray-400 uppercase mb-4">{{ editingTyreId() ? 'Edit Stock Item' : 'Add Stock Item' }}</h3>
   <form [formGroup]="tyreProductForm" (ngSubmit)="saveTyreProduct()" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
         <select formControlName="brand" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"><option value="">Select Brand</option>
            @for (brand of dataService.tyreBrands(); track brand.name) { <option [value]="brand.name">{{ brand.name }}</option> }
         </select>
         <input formControlName="model" placeholder="Model" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white">
         <input formControlName="size" placeholder="Size" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white">
         <select formControlName="category" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"><option value="Premium">Premium</option><option value="Mid-Range">Mid-Range</option><option value="Budget">Budget</option></select>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 border-t border-white/10 pt-4">
         <div><input formControlName="price" type="number" placeholder="Price" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
         <div><input formControlName="offerPrice" type="number" placeholder="Offer Price" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
         <div><input formControlName="quantity" type="number" placeholder="Qty" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      </div>
      <div class="grid grid-cols-3 gap-4 border-t border-white/10 pt-4">
         <div><select formControlName="specFuel" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option></select></div>
         <div><select formControlName="specWet" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option></select></div>
         <div><input formControlName="specNoise" type="number" placeholder="dB" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      </div>
      <div class="mt-4"><input type="file" (change)="onFileSelected($event)" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      <button type="submit" [disabled]="tyreProductForm.invalid" class="w-full bg-[#E30613] hover:bg-red-700 text-white font-bold py-3 rounded text-xs uppercase tracking-widest transition-colors disabled:opacity-50">{{ editingTyreId() ? 'Update Inventory' : 'Add to Inventory' }}</button>
   </form>
</div>
<h3 class="text-sm font-bold text-gray-400 uppercase mb-4">Current Inventory</h3>
<div class="space-y-4 mb-12">
   @if (dataService.tyreInventory().length === 0) { <p class="text-gray-500 text-sm italic">No tyres in stock.</p> }
   @for (tyre of dataService.tyreInventory(); track tyre.id) {
      <div class="bg-black/40 p-4 rounded border border-white/10 flex flex-col md:flex-row justify-between items-center gap-4" [class.border-l-4]="editingTyreId() === tyre.id" [class.border-l-[#E30613]]="editingTyreId() === tyre.id">
         <div class="flex items-center gap-4"><img [src]="tyre.image" class="w-12 h-12 object-contain bg-white/5 rounded-full p-1"><div><p class="font-bold text-sm text-white">{{ tyre.brand }} {{ tyre.model }}</p><p class="text-xs text-gray-500">{{ tyre.size }}</p></div></div>
         <div class="flex items-center gap-6 text-sm">
            <div class="text-center"><div class="flex items-center gap-2"><button (click)="dataService.updateTyreStock(tyre.id, -1)" class="bg-white/10 hover:bg-[#E30613] text-white w-6 h-6 rounded flex items-center justify-center font-bold">-</button><span class="font-bold w-6 text-center">{{ tyre.quantity }}</span><button (click)="dataService.updateTyreStock(tyre.id, 1)" class="bg-white/10 hover:bg-[#E30613] text-white w-6 h-6 rounded flex items-center justify-center font-bold">+</button></div></div>
            <button (click)="editTyre(tyre)" class="bg-white/10 hover:bg-blue-600 text-white p-2 rounded transition-colors">Edit</button>
            <button (click)="removeTyre(tyre.id)" class="bg-white/10 hover:bg-red-600 text-white p-2 rounded transition-colors">X</button>
         </div>
      </div>
   }
</div>
<h3 class="text-sm font-bold text-gray-400 uppercase mb-4 border-t border-white/10 pt-8">Manage Partner Brands</h3>
<div class="flex gap-4 mb-6"><input #tyreBrandInput placeholder="New Brand Name" class="bg-black border border-white/20 rounded p-2 text-sm text-white flex-1"><button (click)="addTyreBrand(tyreBrandInput)" class="bg-white/10 hover:bg-white hover:text-black text-white px-6 py-2 rounded text-xs font-bold uppercase transition-colors">Add Brand</button></div>
<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
   @for (brand of dataService.tyreBrands(); track brand.name) {
      <div class="bg-black/40 p-3 rounded border border-white/10 flex justify-between items-center group hover:border-[#E30613] transition-colors"><span class="font-bold text-xs">{{ brand.name }}</span><button (click)="dataService.removeTyreBrand(brand.name)" class="text-gray-500 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity">âœ•</button></div>
   }
</div>
