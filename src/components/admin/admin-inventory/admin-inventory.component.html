
<div class="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
   <h2 class="text-xl font-bold">Manage Cars</h2>
   @if (editingCarId()) { <button (click)="cancelCarEdit()" class="text-xs text-red-500 uppercase font-bold hover:underline">Cancel Edit</button> }
</div>
<form [formGroup]="carForm" (ngSubmit)="saveCar()" class="mb-12 bg-white/5 p-6 rounded-xl relative border border-white/10" [class.border-[#E30613]]="editingCarId()">
   <h3 class="text-sm font-bold text-gray-400 uppercase mb-4">{{ editingCarId() ? 'Edit Vehicle' : 'Add New Vehicle' }}</h3>
   <div class="grid grid-cols-2 gap-4">
      <div><input formControlName="model" placeholder="Model" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      <div><input formControlName="year" type="number" placeholder="Year" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      <div><input formControlName="engine" placeholder="Engine" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      <div><input formControlName="price" type="number" placeholder="Price (£)" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      <div><input formControlName="mileage" type="number" placeholder="Mileage" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      <div><select formControlName="transmission" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"><option value="Automatic">Automatic</option><option value="Manual">Manual</option></select></div>
      <div class="col-span-2"><textarea formControlName="description" rows="3" placeholder="Description" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></textarea></div>
      <div class="col-span-2"><input formControlName="features" placeholder="Features (comma separated)" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
      <div class="col-span-2"><input type="file" (change)="onFileSelected($event)" class="w-full bg-black border border-white/20 rounded p-2 text-sm text-white"></div>
   </div>
   <button type="submit" [disabled]="carForm.invalid" class="mt-4 bg-[#E30613] text-white px-6 py-2 rounded text-xs font-bold uppercase disabled:opacity-50">{{ editingCarId() ? 'Update Car' : 'Add Car' }}</button>
</form>
<div class="space-y-4">
  @for (car of dataService.inventory(); track car.id) {
     <div class="flex items-center justify-between bg-black/40 p-4 rounded border border-white/10">
        <div class="flex items-center gap-4">
           <img [src]="car.image" class="w-16 h-12 object-cover rounded">
           <div><p class="font-bold text-sm">{{ car.model }}</p><p class="text-xs text-gray-500">{{ car.year }} • £{{ car.price | number }}</p></div>
        </div>
        <div class="flex gap-2">
           <button (click)="editCar(car)" class="text-blue-400 hover:text-white text-xs uppercase font-bold mr-2">Edit</button>
           <button (click)="removeCar(car.id)" class="text-red-500 hover:text-white text-xs uppercase font-bold">Remove</button>
        </div>
     </div>
  }
</div>
